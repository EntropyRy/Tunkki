{% extends 'SonataAdminBundle:CRUD:base_list_flat_inner_row.html.twig' %}

{% block row %}
<div class="col-md-2">
{% set loaded = 1 %}
{% for file in object.files %}
    {% if file is defined and loaded %}
        {% if file.file.providerName == "sonata.media.provider.image" %}
            {% media file.file, 'small' %}
            {% set loaded = 0 %}
        {% endif %}
    {% endif %}
{% endfor %}
{% if loaded %}
    <img  class="hidden-xs hidden-sm" src="/bundles/entropytunkki/images/logo.png" alt="noimg" />
{% endif %}
</div>
<div class="col-md-4">
    {{ object|render_list_element(admin.list['name']) }} {{ object.manufacturer }} {{ object.model }}
        {% if object.url is not empty %}
            <span class="pull-right"><a href="{{object.url}}">URL</a></span>
        {% endif %}<br>
        {% if object.category is not empty %}
            {% if object.category.parent is not empty %}
                {{ object.category.parent }} -
            {% endif %}
                {{ object.category }}
			<br>
        {% endif %}
    <small>
        {{ object.description|truncate(150) }}
    </small>
</div>
{% if object.rent %}
<div class="col-md-3">
{% else %}
<div class="col-md-6">
{% endif %}
        {% if object.needsFixing %}
        Condition  <span class="btn-danger pull-right">needs fixing</span><br>
        <hr style="margin: 2px">
        {% set fixh = object.fixinghistory|last %}
            {% if fixh %}
             <span>{{fixh.createdAt|date('d.m.Y')}}, {{fixh.creator}}: {{ fixh.description }}</span><br>
            {% endif %}
        {% endif %}
        {% if object.toSpareParts %}
		<span><h2>Spare part</h2></span>
        {% endif %}
        {% if object.forSale %}
		<span><h2>For Sale</h2></span>
        {% endif %}
</div>
{% if object.rent %}
<div class="col-md-3">
        Rent info
        <span class="pull-right">{{ object.rent }} â‚¬</span>
		<hr style="margin: 2px">
        For:
        {% for who in object.whocanrent %}
            {{ who }}
        {% endfor %}
    <small>
        {{ object.rentnotice }}
    </small>
</div>
{% endif %}
{% endblock %}
