{% extends 'SonataAdminBundle:Form:form_admin_fields.html.twig' %}

{% block choice_widget_expanded %}
   <div {{ block('widget_container_attributes') }}>
    {%- for child in form %}
        {% set entity = form.vars.choices[child.vars.value].data %}
		{% if entity.items is defined %}
        <div class="box box-solid collapsed-box">
            <div class="box-header" style="padding: 0px;">
                <span>
                    {{- form_widget(child) -}}
                    {{- form_label(child, {translation_domain: choice_translation_domain}) -}}
                </span>
                <div class="box-tools pull-right">
                    <button class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-plus"></i>Show Contents</button>
                </div>
            </div>
            <div style="display: none;" class="box-body">
            <ul>
                {% for item in entity.items %}
                    <li>{{ item }}</li>
                {% endfor %} 
            </ul>
            Note: {{ entity.notes }}
            </div><!-- /.box-body -->
        </div><!-- /.box -->
		{% endif %}
    {% endfor -%}
    </div> 
{% endblock %}

{% block item %}
	{{- form_widget(child) -}}
	{{- form_label(child) -}}
{% endblock %}

{% block entropy_type_items_widget %}
{% for key, category in categories %}
<div class="col-md-12">
	<h3>{{ key }}</h3>
	<div id="masonry">
		{% for key2, cat in category %}
		<div class="item">
			<h4>{{ key2 }}</h4>
			{%- for child in form %}
				{% set entity = form.vars.choices[child.vars.value].data %}
				{% if entity.category == key2 %}
				<div {{ block('widget_container_attributes') }}>
					{{ block('item') }}
				</div>
				{% endif %}
			{% endfor -%}
		</div>
		{% endfor -%}
	</div>
</div>
{% endfor %}
<style>
#masonry {
   /* Prevent vertical gaps */
   line-height: 22px;
   -webkit-column-count: 3;
   -webkit-column-gap:   5px;
   -moz-column-count:    3;
   -moz-column-gap:      5px;
   column-count:         3;
   column-gap:           5px;
}
@media (max-width: 1400px) {
  #masonry {
  -moz-column-count:    4;
  -webkit-column-count: 4;
  column-count:         4;
  }
}
@media (max-width: 1200px) {
  #masonry {
  -moz-column-count:    3;
  -webkit-column-count: 3;
  column-count:         3;
  }
}
@media (max-width: 1000px) {
  #masonry {
  -moz-column-count:    2;
  -webkit-column-count: 2;
  column-count:         2;
  }
}
@media (max-width: 500px) {
  #masonry {
  -moz-column-count:    1;
  -webkit-column-count: 1;
  column-count:         1;
  }
}
.item {
	height: auto;
}
</style>
{% endblock %}

