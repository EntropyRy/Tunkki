<div{{ attributes }}>
    {% for group in this.getArtistStreams(artist) %}
        <div class="stream row">
            <div class="col-sm-5">
                <h4>{{ 'stream.label'|trans }}: {{ group.stream.createdAt|date() }}</h4>
                <p>{{ 'stream.listeners'|trans }}: {{ group.stream.listeners }}</p>

                {% for format in ['flac', 'mp3', 'opus'] %}
                    <a class="btn btn-primary btn-sm"
                       href="{{ domain }}{{ attribute(group.stream, format ~ 'Filename') }}"
                       target="_blank">
                        {{ ('stream.download.' ~ format)|trans }}
                    </a>
                {% endfor %}
            </div>

            <div class="stream-item col-sm-7">
                <p>{{ 'stream.artist.played_at'|trans }}</p>
                {% for item in group.items %}
                    {{ item.startedAt|date('H:i') }} - {{ item.stoppedAt|date('H:i') }}<br>
                {% endfor %}

                {% if group.overlapping_artists is not empty %}
                    <div class="overlapping-artists mt-3 p-2 bg-light rounded">
                        <p class="mb-2"><strong>{{ 'stream.artist.other_artists'|trans }}:</strong></p>
                        {% for overlappingArtist in group.overlapping_artists %}
                            <div class="artist-overlap mb-2 p-1 border-left border-primary">
                                <span class="artist-name fw-bold">{{ overlappingArtist.artist.name }}</span>
                                <div class="overlap-times text-muted small">
                                    {% for item in overlappingArtist.items %}
                                        {{ item.startedAt|date('H:i') }} - {{ item.stoppedAt|date('H:i') }}
                                        {% if not loop.last %}, {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
        {% if not loop.last %}
            <hr>
        {% endif %}
    {% else %}
        <div class="alert alert-info">
            {{ 'stream.no_streams'|trans }}
        </div>
    {% endfor %}
</div>
