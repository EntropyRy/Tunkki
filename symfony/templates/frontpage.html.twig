{% extends 'twocolumn.html.twig' %}
{% block content %}
    {% set name_attr = 'name_attribute'|trans %}
    {% set content_attr = 'content_attribute'|trans %}
    {{ sonata_page_render_container('content', page) }}
    {% for event in events %}
        {% if app.user %}
            {% set visible = true %}
        {% else %}
        {% set visible = app.user is null and event.published and (event.publishDate < date()) %}
        {% endif %}
        {% if event is not null and visible %}
            <div class="post">
                {% if event.type != 'announcement' %}
                    {% if event.url and not event.externalUrl %}
                        <a href="{{ path('entropy_event_slug',{'slug': event.url, 'year': event.eventdate|date('Y')}) }}">
                    {% else %}
                        <a href="{{ path('entropy_event',{'id': event.id}) }}">
                    {% endif %}
                    <h2>{{ attribute(event, name_attr) }} - {{ event.eventdate|date() }}
                        {% if event.sticky and app.user %}<i style="font-size: 1rem;" class="fas fa-thumbtack float-right"></i>{% endif %}
                    </h2>
                        {% if event.picture is not null %}
                            {% media event.picture, 'banner' with {'class':'img-fluid'} %}
                        {% endif %}

                </a>
                <small>{{ 'released'|trans }}: {{ event.publishDate|date() }}</small>
                {% else %}
                    <h2>{{ attribute(event, name_attr) }} - {{ event.eventdate|date() }}</h2>
                    {% if event.picture is not null %}
                        {% media event.picture, 'banner' with {'class':'img-fluid'} %}
                    {% endif %}
                    <small>{{ 'released'|trans }}: {{ event.publishDate|date() }}</small>
                    {{ attribute(event,content_attr)|raw }}
                {% endif %}
            </div>
            <hr>
        {% endif %}    
    {% endfor %}
{% endblock %}
