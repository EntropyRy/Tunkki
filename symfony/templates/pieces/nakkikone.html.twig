{% block your_nakkis %}
    {% if selected|length > 0 %}
    <h3>{{ 'Your Nakkis'|trans }}</h3>
        <div class="row row-cols-2 row-cols-md-4 text-center">
            {% for b in selected %}
                {% set name = b.nakki.definition.name(app.request.locale) %}
                {% set show = true %}
                {% set i = loop.index %}
                {{ block('card') }}
            {% endfor %}
           {#    <li>{{ b.nakki.definition.name(l) }}: {{block('time') }}</li> #}
        </div>
    {% endif %}
{% endblock %}
{% block reserve_nakkis %}
        {% if show_definition|default(false) %}
        <div class="row row-cols-1 row-cols-md-2 row-cols-xxl-3 text-center">
        {% else %} 
        <div class="row row-cols-2 row-cols-md-4 text-center">
        {% endif %}
        {% for name, nakki in nakkis %}
            {% set i = loop.index %}
            {% for b in nakki.bookings %}
                {{ block('card') }}
            {% endfor %}
        {% endfor %}
        </div>
{% endblock %}
{% block card %}
{#{ dump(show|default(false)) }#}
<div class="col mb-3{% if not show|default(false) %} card-hide d-none{%endif%}" {% if not show|default(false) %}id="card-{{ i }}"{%endif%}>
<div class="card">
    <div class="card-body">
        <h5 class="card-title">{{ name }}</h5>
        {% if not hide_time|default(false) %}
        <h6 class="card-subtitle mb-2 text-muted">{{ block('time') }}</h6>
        {% endif %}
        {% if show_definition|default(false) %}
        <p class="card-subtitle mb-2 text-muted">
            {{ b.nakki.definition.description(app.request.locale) }}
        </p>
        {% endif %}
        {% if b.nakki.definition.onlyForActiveMembers %}<p>{{'Only for active members'|trans }}</p>{% endif %}
        <div class="btn-group">
        {% if b.nakki.mattermostChannel is not empty %}
            <a class="btn btn-secondary" href="{{b.nakki.mattermostChannel}}"><i class="fa-solid fa-up-right-from-square"></i> Mattermost</a>
        {% endif %}
        {% if b.member is null %}
        <a href="{{ path('entropy_event_nakki_sign_up', {'id': b.id, 'slug': event.url, 'year': event.eventdate|date('Y') }) }}" class="btn btn-primary">{{'Reserve'|trans }}</a>
        {% else %}
            {% if b.member == app.user.member and allow_nakki_cancel|default(false)%}
            <a href="{{ path('entropy_event_nakki_cancel', {'id': b.id, 'slug': event.url, 'year': event.eventdate|date('Y') }) }}" class="btn btn-secondary">{{'Cancel'|trans }}</a>
            {% else %}
            <button class="btn">{{ b.member.username }}</button>
            {% endif %}
        {% endif %}
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block time %}
{% if event.multiday %}
{{ b.startAt|date('j.m.') }}<br>
{% endif %}
{{ b.startAt|date('H:i') }} - {{ b.endAt|date('H:i') }}
{% endblock %}
